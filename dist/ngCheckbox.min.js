function NgCheckboxController2(t,n){this.ngCheckboxStatistics=n,this.$scope=t,this.head=t.head===!0||t.head===!1?t.head:!1,this.id=t.id?t.id:"ndCB_"+_.uniqueId(this.groups?this.groups.join()+"_":""),this.superGroup=t.superGroup||"default",this.groups=t.groups?angular.isArray(t.groups)?t.groups:[t.groups]:[],this.sum=angular.isArray(t.sum)?_.sum(t.sum):isNaN(t.sum)?0:t.sum,this.count=parseFloat(t.count)||1,this.unit=t.unit||"",this.setValue(t.ngModel)}NgCheckboxController2.$inject=["$scope","ngCheckboxStatistics"],angular.module("ngCheckbox",["templates.ngCheckbox"]),function(t){try{t=angular.module("templates.ngCheckbox")}catch(n){t=angular.module("templates.ngCheckbox",[])}t.run(["$templateCache",function(t){t.put("ngCheckbox.tpl.html",'<label for="{{checkboxCtrl.id}}">\n    <input type="checkbox" class="ngCheckbox" id="{{checkboxCtrl.id}}" ng-model="checkboxCtrl.ngModel" ng-change="checkboxCtrl.onValueChange(checkboxCtrl.ngModel)" />\n    <span ng-transclude></span>\n</label>\n')}])}(),NgCheckboxController2.prototype.setValue=function(t){this.ngModel=this.$scope.ngModel=t===!0||t===!1?t:!0},NgCheckboxController2.prototype.onValueChange=function(t){this.setValue(t),this.head?this.ngCheckboxStatistics.updateAndbroadcast(this.superGroup,this.groups,this.ngModel):this.ngCheckboxStatistics.updateAndbroadcast(this.superGroup)},angular.module("ngCheckbox").controller("NgCheckboxController2",NgCheckboxController2),angular.module("ngCheckbox").directive("ngCheckbox2",["ngCheckboxStatistics",function(t){return{restrict:"E",transclude:!0,scope:{head:"=",id:"@",superGroup:"@",groups:"=",ngModel:"=?ngModel",sum:"=",count:"@",unit:"@"},templateUrl:"ngCheckbox.tpl.html",controllerAs:"checkboxCtrl",controller:"NgCheckboxController2",link:function(n,o,e,u){u.groups&&t.registerCheckboxCtrl(u),n.$watch("ngModel",function(t){u.setValue(t)}),n.$on("$destroy",function(){u.groups&&t.unregisterCheckboxCtrl(u)})}}}]),angular.module("ngCheckbox").factory("ngCheckboxStatistics",["$timeout",function(t){var n,o=[],e={},u=function(t){o.push(t),g()},r=function(t){o.length>0&&(_.remove(o,{id:t.id}),t.ngModel&&g())},s=function(t,n,o){var o=o||"default";"function"==typeof t&&(e[o]=e[o]||[],e[o].push({callBack:t,thisArg:n||null}))},c=function(t){var n=t.sumByUnits,o=[];for(var e in n)n.hasOwnProperty(e)&&o.push({unit:e,sum:n[e]});return t.sumByUnits=o,t},i=function(t,n,e){var u={},r={},s={superGroup:t,groups:u,count:0,sumByUnits:r};return angular.forEach(o,function(o){o.superGroup===t&&angular.forEach(o.groups,function(t){n&&(0===n.length||n.indexOf(t)>-1)&&o.setValue(e),o.head||(u[t]=u[t]||{},u[t].count=u[t].count||0,u[t].sumByUnits=u[t].sumByUnits||{},u[t].sumByUnits[o.unit]=u[t].sumByUnits[o.unit]||0,r[o.unit]=r[o.unit]||0,o.ngModel&&(u[t].count+=o.count,s.count+=o.count,u[t].sumByUnits[o.unit]+=o.count*o.sum,r[o.unit]+=o.count*o.sum))})}),c(s)},a=function(t,n){(t.callBack||angular.noop).apply(t.thisArg?t.thisArg:null,[n])},l=function(t,n,o){var u=e[t];angular.forEach(u,function(e){var u=i(t,n,o);a(e,u)})},h=function(){for(var t in e)e.hasOwnProperty(t)&&l(t)},g=function(o){t.cancel(n),n=t(function(){h()},o||20)},d=function(){},p=function(){d()};return{addListener:s,registerCheckboxCtrl:u,unregisterCheckboxCtrl:r,update:i,broadcast:a,updateAndbroadcast:l,updateAndBroadcastAll:h,debounceUpdateAndBroadcastAll:g,reset:d,resetHard:p}}]);